<?xml version="1.0" encoding="UTF-8"?>


<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>


<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.pos.controller.SalesController">
    <padding>
        <Insets bottom="10.0" left="10.0" right="10.0" top="10.0"/>
    </padding>


    <top>
        <VBox spacing="10">
            <Label text="BÁN HÀNG" style="-fx-font-weight: bold; -fx-font-size: 18;"/>
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="Tìm kiếm sản phẩm:"/>
                <TextField fx:id="searchField" promptText="Nhập tên sản phẩm..." prefWidth="300"/>
                <Button text="Tìm kiếm" onAction="#handleSearch"
                        style="-fx-background-color: #2196F3; -fx-text-fill: white;"/>
            </HBox>
        </VBox>
    </top>


    <center>
        <HBox spacing="20">
            <!-- Cột sản phẩm -->
            <VBox spacing="10" prefWidth="400">
                <Label text="DANH SÁCH SẢN PHẨM" style="-fx-font-weight: bold;"/>
                <TableView fx:id="productTable" prefHeight="400">
                    <columns>
                        <TableColumn fx:id="colProductId" text="Mã SP" prefWidth="60"/>
                        <TableColumn fx:id="colProductName" text="Tên sản phẩm" prefWidth="180"/>
                        <TableColumn fx:id="colPrice" text="Giá bán" prefWidth="100"/>
                        <TableColumn fx:id="colStock" text="Tồn kho" prefWidth="60"/>
                    </columns>
                </TableView>
                <Button text="Thêm vào giỏ hàng" onAction="#handleAddToCart"
                        style="-fx-background-color: #4CAF50; -fx-text-fill: white;"/>
            </VBox>


            <!-- Cột giỏ hàng và thanh toán -->
            <VBox spacing="10" prefWidth="500">
                <Label text="GIỎ HÀNG" style="-fx-font-weight: bold;"/>
                <TableView fx:id="cartTable" prefHeight="250">
                    <columns>
                        <TableColumn fx:id="colCartProduct" text="Sản phẩm" prefWidth="150"/>
                        <TableColumn fx:id="colCartQuantity" text="SL" prefWidth="50"/>
                        <TableColumn fx:id="colCartPrice" text="Đơn giá" prefWidth="100"/>
                        <TableColumn fx:id="colCartSubtotal" text="Thành tiền" prefWidth="120"/>
                    </columns>
                </TableView>


                <HBox spacing="10">
                    <Button text="Xóa sản phẩm" onAction="#handleRemoveFromCart"
                            style="-fx-background-color: #ff9800; -fx-text-fill: white;"/>
                    <Button text="Xóa tất cả" onAction="#handleClearCart"
                            style="-fx-background-color: #f44336; -fx-text-fill: white;"/>
                </HBox>


                <!-- Panel thanh toán -->
                <VBox spacing="15"
                      style="-fx-border-color: #cccccc; -fx-border-width: 1; -fx-border-radius: 5; -fx-padding: 15; -fx-background-color: #f9f9f9;">
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="Tổng tiền:" style="-fx-font-weight: bold; -fx-font-size: 14;"/>
                        <Label fx:id="totalLabel" text="0 đ"
                               style="-fx-font-weight: bold; -fx-text-fill: #e91e63; -fx-font-size: 16;"/>
                    </HBox>


                    <GridPane hgap="10" vgap="10">
                        <columnConstraints>
                            <ColumnConstraints prefWidth="150"/>
                            <ColumnConstraints prefWidth="200"/>
                        </columnConstraints>


                        <rowConstraints>
                            <RowConstraints prefHeight="30"/>
                            <RowConstraints prefHeight="30"/>
                            <RowConstraints prefHeight="30"/>
                        </rowConstraints>


                        <Label text="Phương thức TT:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                        <ComboBox fx:id="paymentMethodCombo" prefWidth="150" GridPane.rowIndex="0"
                                  GridPane.columnIndex="1"/>


                        <Label text="Tiền khách đưa:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                        <TextField fx:id="customerPaidField" promptText="Nhập số tiền..." GridPane.rowIndex="1"
                                   GridPane.columnIndex="1"/>


                        <Label text="Tiền thừa trả khách:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                        <Label fx:id="changeLabel" text="0 đ" style="-fx-font-weight: bold; -fx-text-fill: #2196F3;"
                               GridPane.rowIndex="2" GridPane.columnIndex="1"/>
                    </GridPane>


                    <Button text="THANH TOÁN" onAction="#handleCheckout"
                            style="-fx-background-color: #9C27B0; -fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 14; -fx-padding: 10;"
                            maxWidth="Infinity"/>
                </VBox>
            </VBox>
        </HBox>
    </center>
</BorderPane>
